<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>details｜KAWAROBO</title>
  <meta name="description" content="KAWAROBOプレゼン用">
  <meta name="viewport" content="width=device-width">
  <script src="./js/toggle-menu.js"></script>
  <link href="./css/common.css" rel="stylesheet">
  <link href="./css/details.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic&display=swap" rel="stylesheet">
</head>

<body>

  <header class="header">
    <div class="header-inner">
      <a class="header-logo" href="./index.html">
        <img src="./images/kawarobo/logo3.svg" alt="KAWAROBO">
      </a>
      <button class="toggle-menu-button"></button>
      <div class="header-site-menu">
        <nav class="site-menu">
          <ul>
            <li><a href="./concept.html">CONCEPT</a></li>
            <li><a href="./history.html">HISTORY</a></li>
            <li><a href="./details.html">DETAILS</a></li>
            <li><a href="./survey.html">SURVEY</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <main class="main">
    <div class="title">
      <h1>DETAILS</h1>
    </div>

  <div class="con">

    <div class="use">
      <h3>頭部分に主に使用したもの</h3>
      <p>・RasberryPi4 8GB</p>
      <p>・ESP32</p>
      <p>・OAK-D-LITE</p>
      <p>・SG90サーボモーター×2</p>
      <p>・ASRock H2R (HDMI 2-in-1 ルーター)</p>
      <p>・単三電池×4/電池ボックス/5Vモバイルバッテリー</p>

    </div>
    

    <div class="contents">
      <h3>システム・回路(頭部分)</h3>
      <ul class="list2">
        <li class="item-1"><p>回路図</p></li>
        <li class="item-2"><p>システム概要図</p></li>
        <li class="item-3"><img src="./images/kawarobo/kairo3.png" alt="回路図" class="p80"></li>
        <li class="item-4"><img src="./images/kawarobo/sisugai.png" alt="システム概要図" class="p80"></li>
      </ul>
    </div>
    
    <div class="contents">
      <h3>PIカメラとOAK-D-Liteの比較</h3>
      <ul class="list4">
        <li>
          <div class="img1">
            <img src="./images/kawarobo/picam.jpg" alt="パイカメラ">
          </div>
        </li>

        <li>
          <p1>PIカメラ<br></p1>
          <p2>フレームレート<br>→約3.3FPS<br>実際のラグ<br>→約2.4s</p2>
        </li>
        
        <li>
          <div class="img1">
            <img src="./images/kawarobo/oak.jpg" alt="OAK">
          </div>
        </li>

        <li>
          <p1>OAK-D-LITE<br></p1>
          <p2>フレームレート<br>→約18.3FPS<br>実際のラグ<br>→約0.7s</p2>
        </li>
      </ul>

      <ul class="list2">
        <li><img src="./images/kawarobo/paicam3.gif" alt="パイカメラのラグ"class="p80"></li>
        <li><img src="./images/kawarobo/oak3.gif" alt="OAKのカメラのラグ"class="p80"></li>
      </ul>
    </div>

    <div class="contents">
      <h3>OAK-D-LITEでできること</h3>   
      <p>物体検知・<p3>座標取得(xyz平面)</p3>・姿勢推移・<p3>顔,手認識</p3>etc...</p>
      <ul class="cando-list">
        <li class="o1"><div class="img2"><img src="./images/kawarobo/cando_oak1.png" alt="cando_oak1"></div></li>
        <li class="o2"><div class="img1"><img src="./images/kawarobo/hand-1.png" alt="3"></div></li>
        <li class="o3"><div class="img1"><img src="./images/kawarobo/hand-2.png" alt="4"></div></li>
        <li class="o4"><div class="img1"><img src="./images/kawarobo/hand-3.png" alt="5"></div></li>
        <li class="o5"><div class="img1"><img src="./images/kawarobo/hand-4.png" alt="OK"></div></li>
        <li class="o6"><div class="img2"><img src="./images/kawarobo/cando_oak2.jpeg" alt="cando_oak1"></div></li>
        <li class="o7"><div class="img1"><img src="./images/kawarobo/hand-5.png" alt="PEACE"></div></li>
        <li class="o8"><div class="img1"><img src="./images/kawarobo/hand-6.png" alt="FIST"></div></li>
        <li class="o9"><div class="img1"><img src="./images/kawarobo/hand-7.png" alt="RIGHT"></div></li>
        <li class="o10"><div class="img1"><img src="./images/kawarobo/hand-8.png" alt="LEFT"></div></li>
      </ul> 
      <div class="git-container">
        <div class="git">
          <a href="https://github.com/luxonis/depthai-experiments" class="link">
            <div class="git-con">
              <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" class="github-logo">
                <div>
                  <h2>luxonis/depthai-experiments</h2>
                  <p>参考</p>
                </div>
              </div>
          </a>
        </div>
      </div>
    </div>

    <div class="contents">
      <h3>フローチャート全体図</h3>
      <div class="git-container">
        <div class="git">
          <a href="https://github.com/yaotaim/robo/blob/main/kawaii/demo_ver2_ESP.ino" class="link">
            <div class="git-con">
              <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" class="github-logo">
                <div>
                  <h2>yaotaim/robo/blob/main/kawaii/demo_ver2_ESP.ino</h2>
                  <p>ESP32側</p>
                </div>
              </div>
          </a>
        </div>
  
        <div class="git">
          <a href="https://github.com/yaotaim/robo/blob/main/kawaii/kawa_hf.py" class="link">
              <div class="git-con">
                  <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" class="github-logo">
                  <div>
                    <h2>yaotaim/robo/blob/main/kawaii/kawa_hf.py</h2>
                    <p>ラズパイ側</p>
                  </div>
              </div>
          </a>
        </div>
      </div>
      
      <div class="img3">
        <img src="./images/kawarobo/flow_zentai.drawio.png" alt="LEFT">
      </div>
    </div>

      <div class="contents">
        <h3>実際にデモで行った動き</h3>
        <div class="demo">
          <p>・スマホ・パソコンから操作</p>
          <div class="list2-2">
            <div class="item1">
              <div class="img5">
                <img src="./images/kawarobo/raspi_sousa_flow.png" alt="ESPフロチャ">
              </div>
            </div>
            <div class="item2">
              <div class="img4">
                <img src="./images/kawarobo/UIsousa2.gif" alt="UI操作">
              </div>
            </div>
          
            <div class="item3">
              <div class="img4">
                <img src="./images/kawarobo/UI_kai.gif" alt="UI">
              </div>
            </div>
          </div>
        </div>
        
        <div class="demo">
          <p>・顔追従</p>
          <div class="list2-2">
            <div class="item1">
              <div class="img7">
                <img src="./images/kawarobo/face.drawio.png" alt="顔追従フロチャ">
              </div>
            </div>
            <div class="item2">
              <div class="img6">
                <img src="./images/kawarobo/demo_face_moza.gif" alt="顔追従">
              </div>
            </div>
            <div class="item3">
              <div class="img6">
                <img src="./images/kawarobo/zahyou.drawio.png" alt="座標">
              </div>
            </div>
          </div>
        </div>
        
        <div class="demo">
          <p>・ハンドジェスチャー操作</p>
          <div class="img8">
            <img src="./images/kawarobo/hand_jes.drawio.png" alt="ESPフロチャ">
          </div>
          <p>　</p>
          <ul class="list2">
            <li class="d1"><p2>指差し指示</p2></li>
            <li class="d2"><p2>指差し指示（正面から)</p2></li>
            <li class="d3"><div class="img9"><img src="./images/kawarobo/yubisasi.gif" alt="ESPフロチャ"></div></li>
            <li class="d4"><div class="img9"><img src="./images/kawarobo/hand_right.gif" alt="ESPフロチャ"></div></li>
            <li class="d5"><p2>ピース追従</p2></li>
            <li class="d6"><p2>あっち向いてホイ</p2></li>
            <li class="d7"><div class="img9"><img src="./images/kawarobo/PEASE.gif" alt="ESPフロチャ"></div></li>
            <li class="d8"><div class="img9"><img src="./images/kawarobo/attimuite.gif" alt="ESPフロチャ"></div></li>
          </ul>
        </div>
      </div>
    
      <div class="kaizen">
        <h3>・改善点</h3>
        <p>1.今回頭と体を合体して制御するところまでいかなかったので合体させる。</p>
        <p>2.顔追従の際に追従より先に顔がフレームアウトした際にも、適切に追従を続けるようにするなど。</p>
        <p>3.かわいい動作をもっと作る→自由度を増やす(ロール)</p>
        <p>　</p>
        <p>4.カメラ自体を顔にするのではなくカメラを胴体部につける:ハード的な視点</p>
        <p>問題:根本のSG90がカメラの重さにより負担+足制御の負担(重心)</p>
        <p>→長期的に動かすと仮定+足制御を考慮すると頭部分を軽くする必要があると感じた。</p>
        <p>　</p>
        <p>カメラを胴体につけた時のサーボ制御方法+頭がカメラのときでもより早く顔を追従するために...</p>
        <p>→逆運動学を用いてサーボ制御が必要</p>
        <p>問題:現在はプログラムのループ上にサーボ制御を組み込んでおり、サーボ制御時にはカメラの情報取得が止まってしまうので、逆運動学の式でサーボを動かしても滑らかかつ早く追従することができない。</p>
        <p>ラズパイは画像処理とシリアル送ることに集中させ、ESP側でサーボ制御する。</p>
        <p>この際、ラズパイとESP間で高速通信した際、カメラが停止する問題があったので通信方法を見直す。</p>


      </div>
    </div>
  </main>

  <footer class="footer">
    <nav class="site-menu">
      <ul>
        <li><a href="./concept.html">CONCEPT</a></li>
        <li><a href="./history.html">HISTORY</a></li>
        <li><a href="./details.html">DETAILS</a></li>
        <li><a href="./survey.html">SURVEY</a></li>
      </ul>
    </nav>
    <a class="footer-logo" href="./index.html">
      <img src="./images/kawarobo/logo2-whi2.svg" alt="スケロゴ">
    </a>
    <p class="footer-tel">X22048</p>
    <p class="footer-time">TANAKA EIJI</p>
    <p class="copyright"><small>&copy;KAWAROBO</small></p>
  </footer>

</body>

</html>
